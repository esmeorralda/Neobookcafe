<% if posts.present? %>
  <% posts.each do |post| %>
    <div class="mt-10 border-b pb-8">
      <h2 class="text-xl font-semibold mb-2">
        <%= link_to post.title, post_path(post), class: "hover:underline" %>
      </h2>
      <p class="text-sm leading-relaxed text-[#5b5045]">
        <%= truncate(post.top_content.to_s, length: 150) %>
      </p>

      <div class="flex justify-between items-end mt-4 text-xs text-[#a09388]">
        <div class="space-x-2">
          <span><%= post.category || "카테고리" %></span>
          <span><%= time_ago_in_words(post.created_at) %> 전, <%= post.user&.name || post.user&.email || "익명" %> 씀</span>
        </div>

        <div class="text-xs text-[#999] space-x-3 flex items-center">
          <% if post.draft? %>
            <!-- 임시저장글 표시 -->
            <span class="italic ">임시저장글입니다.</span>
          <% else %>
            <!-- 일반 글인 경우: 조회수 / 좋아요 / 댓글 수 -->
            <span class="flex items-center space-x-1">
              <%= image_tag("icon/post/brownviews.svg", alt: "views icon", class: "w-4 h-4") %>
              <span><%= post.view_count || 0 %></span>
            </span>

            <span class="flex items-center space-x-1">
              <%= image_tag("icon/post/brownoutlinedhear.svg", alt: "likes icon", class: "w-4 h-4") %>
              <span><%= post.like_count || 0 %></span>
            </span>

            <span class="flex items-center space-x-1">
              <%= image_tag("icon/post/browncomments.svg", alt: "comments icon", class: "w-4 h-4") %>
              <span><%= total_comments_count(post) %></span>
            </span>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
<% else %>
  <div class="mt-10 text-center text-sm text-[#a09388] italic">
    아직 게시물이 없습니다.
  </div>
<% end %>
